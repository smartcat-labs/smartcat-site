<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js ie6"> <![endif]-->
<!--[if IE 7]>         <html class="no-js ie7"> <![endif]-->
<!--[if IE 8]>         <html class="no-js ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
		<link href="favicon.ico" rel="icon" />
		<title>SmartCat | Migrating time series data from MySql to Cassandra</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" href="assets/css/style.css">
		<link rel="stylesheet" type="text/css" href="rs-plugin/css/settings.css" media="screen" />

		<script type="text/javascript" src="assets/scripts/libs/modernizr-2.6.2.min.js"></script>
	</head>
<body>

	<div class="container">
		<header class="header">
			<div class="wrapper">
				<a href="index.html" class="logo">
					<img src="assets/img/logo.png" alt="" />
				</a>

				<div class="search-desktop">
					<div class="search-wrapper">
						<a href="javascript:;" class="btn-search">
							<i class="ico"></i>
						</a>
						<input type="search" placeholder="Search">
					</div>
					
					<a href="javascript:;" class="open-search">
						<i class="ico"></i>
					</a>
				</div>

				<ul class="social">
					<li>
						<a href="http://www.github.com" target="_blank"><i class="ico github"></i></a>
					</li>
					<li>
						<a href="http://www.twitter.com" target="_blank"><i class="ico twitter"></i></a>
					</li>
					<li>
						<a href="http://www.stackoverflow.com" target="_blank"><i class="ico stackoverflow"></i></a>
					</li>
					<li>
						<a href="http://www.linkedin.com" target="_blank"><i class="ico linked"></i></a>
					</li>
				</ul>
				<a href="tel:+381216616557" class="phone">+381 (0)21 661 65 57</a>
				<div class="menu-wrapper">
					<nav class="main-nav">
						<a href="javascript:;" class="close-menu">
							<i class="ico"></i>
						</a>
						<ul>
							<li>
								<a href="services.html">Services</a>
							</li>
							<li>
								<a href="technologies.html">
									<span class="t-desktop">Technologies</span>
									<span class="t-desktop-small">Techs</span>
								</a>
							</li>
							<li>
								<a href="process.html">Process</a>
							</li>
							<li>
								<a href="team.html">Team</a>
							</li>
							<li>
								<a href="blog.html" class="active">
									<i class="ico cat"></i>
									<strong>Blog</strong>
								</a>
							</li>
							<li>
								<a href="news.html">News</a>
							</li>
							<li>
								<a href="contact.html">Contact</a>
							</li>
						</ul>
						<div class="search-box">
							<input type="text">
							<a href="javascript:;" class="search-btn">
								<i class="ico"></i>
							</a>
						</div>
					</nav>
				</div>
				<a href="javascript:;" class="menu-btn"><i class="ico"></i></a>
			</div>
		</header>
		
		<div class="page-title">
			<div class="wrapper">
				<h1>Blog</h1>
			</div>
		</div>
		
		<div class="content">
			<div class="wrapper o-visible">
				<div class="main article">
					<div class="title">
						<h2>Migrating time series data from MySql to Cassandra</h2>
						<a href="blog.html" class="go-back">Back</a>
						<span class="date">17/07/15</span>
					</div>
					<div class="img-wrap">
						<img src="assets/img/content/migration-time-series_detailed.jpg" alt="" />
						<div class="badge romb"><span class="reset-inner">B.</span></div>
					</div>
					<div class="rte-content">
						<p>
							MySql is still widely used in application development as a stable, fairly performant and reliable relational database. People tend to use languages, technologies and tools they feel most comfortable with which is expected. We have got to the point where we generate more data daily than we can store or process, not to mention getting valuable information from it. I have worked on a project for one client where they had been storing time series data into MySql and after a year or two their database started to choke and indexing was falling apart. What's even worse they didn't even use that data properly but just stored it and displayed it with a couple of different queries.
						</p>
						<p>
							The client’s requirement was to have better performance than it already was, with the ability to continue storing their event data. The problem with MySql was that they were getting web request timeouts before retrieving data from database. Queries were not complex at all but the sheer amount of data was too much for MySql. We had a competition with another company that went with Hadoop and we were going to measure up against them. Knowing that Hadoop didn’t have the speed that Cassandra has, this was no contest. On the other hand, Hadoop platform had more functionalities besides storage and would provide us with a way to analyze stored data but we had our eyes on Spark for that.
						</p>
						<p>
							The first step was to define all the ways we need to query data in order to create a suitable data model. This is a crucial step with any database and especially with Cassandra because it has a query based data model.
						</p>
						<p>
							After a few sessions together with engineers with domain knowledge we got to the point where all queries were covered and data model looked good. After initial implementation and testing, we had to make some minor changes to the data model to get the best performance possible. One of the issues when migrating from Cassandra is that the request timeout is probably much less by default than the database you are coming from. In Cassandra the default is 10 seconds and we opted for keeping that value. It sounds like a lot, but for some heavy queries MySql it took up to a minute or more. Since our events have a lot of information and tend to be bigger than the average time series data, query responses were easily measured in megabytes. Pulling that amount of data from replica nodes, merging it into a response on a coordinator, pushing it over the network and packing it up into application models has to take some time. We weren’t targeting millisecond or even sub millisecond responses but rather staying under that 10 seconds timeout.
						</p>
						<p>
							When implementing our solution, we used all bells and whistles that .net driver has to offer. Starting out with a 5 node cluster, we were able to leverage the parallel execution of partition based queries. There is no benefit in executing parallel queries on the same partition since they will all get executed on the same replica nodes. When executing on different partitions there is a high chance that results will be handled by different nodes thus having the response time of the slowest node.
						</p>
						<p>
							One of the major problems was having query limits while executing parallel queries on multiple partitions. We ended up having some overhead in these queries since you don’t know how many events will get queried from each partition because they are unevenly populated. Investigation proved that these queries made up a small percentage of total queries so we decided to leave it at that. There are different ways of handling this and squeezing more performance but all in all, we were happy with the results.
						</p>
						<p>
							The end result was being able to query events for a one-year timespan with reasonable response time which was not even possible with mysql, and prioritized queries were several times faster than mysql. The benefits of this migration are mainly performance and scaling but we have also enabled the client to execute the analysis of their data which can help them improve their business.
						</p>
					</div>
					<div class="article-nav">
						<a href="blackbox-testing.html" class="prev-post">
							<i></i>
							Previus post
						</a>
						<a href="setting-up-embedded.html" class="next-post">
							Next post
							<i></i>
						</a>
					</div>
					<div class="article-footer">
						<div class="share-box">
							<span>Share</span>
							<ul>
								 <li>
								 	<a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fsmartcat.io&t=" target="_blank" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.URL) + '&t=' + encodeURIComponent(document.URL)); return false;">FB</a>
							 	</li>
							  	<li>
							  		<a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fsmartcat.io&text=:%20http%3A%2F%2Fsmartcat.io" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.title) + ':%20'  + encodeURIComponent(document.URL)); return false;">TW</a>
						  		</li>
							  	<li>
							  		<a href="https://plus.google.com/share?url=http%3A%2F%2Fsmartcat.io" target="_blank" title="Share on Google+" onclick="window.open('https://plus.google.com/share?url=' + encodeURIComponent(document.URL)); return false;">G+</a>
						  		</li>
							  	<li>
							  		<a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fsmartcat.io&title=&summary=&source=http%3A%2F%2Fsmartcat.io" target="_blank" title="Share on LinkedIn" onclick="window.open('http://www.linkedin.com/shareArticle?mini=true&url=' + encodeURIComponent(document.URL) + '&title=' +  encodeURIComponent(document.title)); return false;">IN</a>
						  		</li>
							</ul>
						</div>
					</div>
					
					<div class="author-box">
						<img src="assets/img/content/home-nenad.png"  alt="" class="hidden-on-mobile" />
						<div class="info">
							<h4><span>Nenad Bozic</span></h4>
							<h5>Co-Founder</h5>
							<p>
								Craftsman with more than 10 years of experience, when he does backend coding in Java he feels right at home but likes to do short excursions in other technologies like ruby on rails, angularJS, PHP…
							</p>
							<div class="bottom">
								<a href="mailto:nenad.bozic@smartcat.io" class="contact-link">
									<i class="ico ico-mail"></i> Contact Nenad
								</a>
								<ul class="social-links">
									<li>
										<a href="https://en-gb.facebook.com/nbozicns" target="_blank" class="facebook"><i class="ico"></i></a>
									</li>
									<li>
										<a href="https://twitter.com/nenadbozicns" target="_blank" class="twitter"><i class="ico"></i></a>
									</li>
									<li>
										<a href="https://github.com/nbozic" target="_blank" class="git"><i class="ico"></i></a>
									</li>
									<li>
										<a href="https://rs.linkedin.com/pub/nenad-bozic/32/1b6/b30" target="_blank" class="linked"><i class="ico"></i></a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<aside class="sidebar">
					<div class="widget slider">
						<h3><a href="news.html">What's new</a></h3>
						<div class="flexslider">
							<ul class="slides">
								<li>
									<div class="text-item">
										<div class="romb badge">
											<span class="reset-inner">N.</span>
										</div>
										<h4><a href="why-smartcat.html">Why SmartCat?</a></h4>
										<p>
											The concept of Big Data has intrigued us from the very first online articles describing this new frontier of technology, back in 2007. Imagine if we could know...
										</p>
										<span class="author">Nenad Bozic</span>
										<span class="date">24/07/15</span>
									</div>
								</li>
								<li>
									<div class="text-item">
										<div class="romb badge">
											<span class="reset-inner">N.</span>
										</div>
										<h4><a href="cassandra-summit.html">Cassandra summit 2015</a></h4>
										<p>
											We are excited for the upcoming Cassandra Summit in San Francisco, the biggest NoSQL conference in the world and epicenter of Cassandra...
										</p>
										<span class="author">Matija Gobec</span>
										<span class="date">30/07/15</span>
									</div>
								</li>
								<li>
									<div class="text-item">
										<div class="romb badge">
											<span class="reset-inner">N.</span>
										</div>
										<h4><a href="coding-serbia.html">Coding Serbia</a></h4>
										<p>
											We would like to share our excitement with you. This October we will be a part of the 3rd international Coding Serbia conference in Novi Sad as silver...
										</p>
										<span class="author">Bojan Kovac</span>
										<span class="date">05/08/15</span>
									</div>
								</li>
							</ul>
						</div>
					</div>
					<div class="widget slider">
						<h3><a href="team.html">Challengers</a></h3>
						<div class="flexslider challengers">
							<ul class="slides">
								<li>
									<div class="inner">
										<img src="assets/img/content/sidebar-bojan.png">
										<div class="author-info">
											<h4>Bojan Kovac</h4>
											<span>Co-Founder</span>
										</div>
									</div>
								</li>
								<li>
									<div class="inner">
										<img src="assets/img/content/sidebar-matija.png">
										<div class="author-info">
											<h4>Matija Gobec</h4>
											<span>Co-Founder</span>
										</div>
									</div>
								</li>
								<li>
									<div class="inner">
										<img src="assets/img/content/sidebar-nenad.png">
										<div class="author-info">
											<h4>Nenad Bozic</h4>
											<span>Co-Founder</span>
										</div>
									</div>
								</li>
							</ul>
						</div>
					</div>
					<div class="widget slider">
						<h3><a href="services.html">What we do</a></h3>
						<div class="flexslider small">
							<ul class="slides">
								<li>
									<div class="center">
										<img src="assets/img/content/data-architecture-slider.png">
										<h4><a href="architecture.html">Architecture</a></h4>
									</div>
								</li>
								<li>
									<div class="center">
										<img src="assets/img/content/data-storage-slider.png">
										<h4><a href="data-storage.html">Data storage</a></h4>
									</div>
								</li>
								<li>
									<div class="center">
										<img src="assets/img/content/data-analytics-slider.png">
										<h4><a href="data-processing.html">Data processing</a></h4>
									</div>
								</li>
								<li>
									<div class="center">
										<img src="assets/img/content/data-analytics-slider.png">
										<h4><a href="data-analytics.html">Data analytics</a></h4>
									</div>
								</li>
							</ul>
						</div>
					</div>
				</aside>
			</div>
		</div>
		
		<footer class="footer">
			<section class="top">
				<img src="assets/img/star-texture.png" alt=""/>
				<div class="wrapper">
					<h2>Want to work with us?</h2>
					<p>
						Want to see what SmartCat can do for your business? <br> We can't wait to show you! Provide us your info in the field below.
					</p>
				</div>
			</section>
			
			<div class="contact-block">
				<div class="wrapper">
					<h4>Contact us</h4>
					<form id="theForm" class="simform" autocomplete="off">
						<div class="simform-inner">
							<ol class="questions">
								<li>
									<span><label for="q1">What's your name? <span>(Please fill the field before continuing)</span></label></span>
									<input id="q1" name="q1" type="text"/>
								</li>
								<li>
									<span><label for="q2">Where do you live?</label></span>
									<input id="q2" name="q2" type="text"/>
								</li>
								<li>
									<span><label for="q3">What time do you got to work?</label></span>
									<input id="q3" name="q3" type="text"/>
								</li>
								<li>
									<span><label for="q4">How do you like your veggies?</label></span>
									<input id="q4" name="q4" type="text"/>
								</li>
								<li>
									<span><label for="q5">What book inspires you?</label></span>
									<input id="q5" name="q5" type="text"/>
								</li>
								<li>
									<span><label for="q6">What's your profession?</label></span>
									<input id="q6" name="q6" type="text"/>
								</li>
							</ol><!-- /questions -->
							<button class="submit" type="submit">Send answers</button>
							<div class="controls">
								<button class="next"></button>
								<div class="progress"></div>
								<span class="number">
									<span class="number-current"></span>
									<span class="number-total"></span>
								</span>
								<span class="error-message"></span>
							</div><!-- / controls -->
						</div><!-- /simform-inner -->
						<span class="final-message"></span>
					</form>
					<ul class="social show-on-mobile">
						<li>
							<a href="https://github.com/smartcat-labs" class="ico github" target="_blank"></a>
						</li>
						<li>
							<a href="javascript:;" class="ico twitter"></a>
						</li>
						<li>
							<a href="javascript:;" class="ico stackoverflow"></a>
						</li>
						<li>
							<a href="javascript:;" class="ico linked"></a>
						</li>
					</ul>
					<a href="javascript:;" class="scroll-top show-on-mobile"></a>
				</div>
			</div>
			
			<div class="bottom">
				<div class="wrapper">
					<div class="left">
						<a href="index.html" class="logo">
							<img src="assets/img/footer-logo.png" alt="" />
						</a>
						<p>
							&copy;SmartCat 2015.All rights reserved. Design by <a href="http://www.weareelder.com" target="_blank">Elder</a>.
						</p>
					</div>
					<ul class="info-list">
						<li>	
							<span>
								<i class="ico pin"></i>
								Danila Kiša 3V/14, Novi Sad, 21000, Serbia
							</span>
						</li>
						<li>	
							<a href="tel:+381216616557">
								<i class="ico telephone"></i>
								+381 (0)21 661 65 57
							</a>
						</li>
						<li>	
							<a href="mailto:info@smartcat.io">
								<i class="ico mail"></i>
								info@smartcat.io
							</a>
						</li>
					</ul>
				</div>
			</div>			
		</footer>
	</div>

<!-- javascript -->

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write("<script src='assets/scripts/main/jquery-1.8.3.min.js'>\x3C/script>")</script>
<script type="text/javascript" src="assets/scripts/libs/classie.js"></script>
<script type="text/javascript" src="assets/scripts/libs/stepsForm.js"></script>
<script type="text/javascript" src="assets/scripts/libs/jquery.flexslider-min.js"></script>

<script type="text/javascript" src="assets/scripts/main/default.js"></script>

 <!--[if lt IE 7]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

</body>
</html>
